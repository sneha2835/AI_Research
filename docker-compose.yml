services:
  # MongoDB Database
  mongodb:
    image: mongo:7.0
    container_name: research_mongodb
    ports:
      - "27017:27017"
    volumes:
      - ./mongodb_data:/data/db
    environment:
      - MONGO_INITDB_DATABASE=research_db
    networks:
      - research_network
    restart: unless-stopped

  # ChromaDB Vector Database
  chromadb:
    image: chromadb/chroma:latest
    container_name: research_chromadb
    ports:
      - "8000:8000"
    volumes:
      - ./vector_db:/chroma/chroma
    environment:
      - IS_PERSISTENT=TRUE
      - ANONYMIZED_TELEMETRY=FALSE
    networks:
      - research_network
    restart: unless-stopped

  # GROBID for PDF parsing
  grobid:
    image: lfoppiano/grobid:0.8.0
    container_name: research_grobid
    ports:
      - "8070:8070"
    volumes:
      - ./grobid:/opt/grobid
    networks:
      - research_network
    restart: unless-stopped

  # Ollama for LLM
  ollama:
    image: ollama/ollama:latest
    container_name: research_ollama
    ports:
      - "11434:11434"
    volumes:
      - ./models:/root/.ollama
    networks:
      - research_network
    restart: unless-stopped

networks:
  research_network:
    driver: bridge

volumes:
  mongodb_data:
  vector_db:
  grobid:
  models:
